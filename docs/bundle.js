(()=>{"use strict";let e="",t="";function n(){let t=document.querySelector(".cityInput").value;e=t,o()}function o(){let n=[],o="",a="";fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric,{state%20code}&appid=7a272ee75ecd163ddfed4a4a57d3e611&lang=ru`).then((function(e){200===e.status?e.json().then((function(e){n=e,o=n.coord.lon.toString().slice(0,5),a=n.coord.lat.toString().slice(0,5),t=n.weather[0].description,function(e){document.querySelector(".wrap").className="пасмурно"===e?"wrap bckDark":"ясно"===e?"wrap bckClear":"wrap bckCloudy"}(t),function(e){document.querySelector(".current__city").textContent=e.name,document.querySelector(".current__day").textContent=c(e.dt)+" "+l(e.dt)+" "+r(e.dt)+":00",document.querySelector(".current__temp").textContent=Math.round(e.main.temp-273.15),document.querySelector(".current__mainInfo").textContent=e.weather[0].description+", ощущается: "+Math.round(e.main.feels_like-273.15)+", скорость ветра: "+e.wind.speed+" м/с";const t=document.createElement("div");t.innerHTML=`\n    <img class="current__icon" src=http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png>\n    `,document.querySelector(".current__icon").replaceWith(t),console.log(t)}(n),document.querySelector(".loading").style.display="none",document.querySelector(".wrap").style.display="flex",fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${Number(a)}&lon=${Number(o)}&exclude=hourly&appid=7a272ee75ecd163ddfed4a4a57d3e611&lang=ru`).then((function(e){e.json().then((function(e){let t=[];for(let n=0;n<8;n++){let o={day:c(e.daily[n].dt),icon:`https://openweathermap.org/img/wn/${e.daily[n].weather[0].icon}@2x.png`,temp:e.daily[n].temp.day,mounth:l(e.daily[n].dt)};t.push(o)}!function(e){let t=document.querySelector(".daily");for(;t.firstChild;)t.removeChild(t.firstChild);for(let t=0;t<e.length;t++)new i(e[t].day,e[t].mounth,e[t].temp,e[t].icon,".daily","item").render()}(t)}))})),fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${Number(a)}&lon=${Number(o)}&exclude=daily&appid=7a272ee75ecd163ddfed4a4a57d3e611&lang=ru`).then((function(e){e.json().then((function(e){let t=[];for(let n=0;n<12;n++){let o={day:r(e.hourly[n].dt),icon:`https://openweathermap.org/img/wn/${e.hourly[n].weather[0].icon}@2x.png`,temp:e.hourly[n].temp};t.push(o)}!function(e){let t=document.querySelector(".hourly");for(;t.firstChild;)t.removeChild(t.firstChild);for(let t=0;t<e.length;t++)new i(e[t].day,null,e[t].temp,e[t].icon,".hourly","item").render()}(t)}))})).catch((function(e){console.log("Fetch Error :-S",e)}))})):alert("err in getApiData")}))}function r(e){return new Date(1e3*e).getHours()}function c(e){return new Date(1e3*e).getDate()}function l(e){return["Янв","Фев","Мар","Апр","Мая","Июня","Июля","Авг","Сен","Окт","Ноя","Дек"][new Date(1e3*e).getMonth()]}document.querySelector(".showHourly").onclick=function(){document.querySelector(".daily").style.display="none",document.querySelector(".hourly").style.display="flex",document.querySelector(".showHourly").style.border="1px solid",document.querySelector(".showDaily").style.border="inherit"},document.querySelector(".showDaily").onclick=function(){document.querySelector(".daily").style.display="flex",document.querySelector(".hourly").style.display="none",document.querySelector(".showDaily").style.border="1px solid",document.querySelector(".showHourly").style.border="inherit"},navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{let n=t.coords.latitude,r=t.coords.longitude;fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${n}&longitude=${r}&localityLanguage=ru`).then((function(t){200===t.status?t.json().then((function(t){e=""===t.city?t.countryName:t.city,console.log(e),o()})):alert("err in getLocation")}))}),(t=>{let n=prompt("Не удалось определить местоположение, укажите:");e=n,o(),console.error(t)})),document.querySelector(".cityInput").onkeydown=function(e){13==e.keyCode&&n()},document.querySelector(".searchIcon").onclick=function(){n()};class i{constructor(e,t,n,o,r,...c){this.day=e,this.mounth=t,console.log(t),this.temp=Math.round(n-273.15),this.icon=o,this.classes=c,this.parent=document.querySelector(r)}render(){const e=document.createElement("div");this.classes.forEach((t=>e.classList.add(t))),e.innerHTML=`\n       ${null===this.mounth?"<div></div>":`<div>${this.mounth}</div>`} \n        <div  class="day">${this.day}</div>\n        <img class="icon" src=${this.icon}>\n        <div class="temp">${this.temp}</div>\n        `,this.parent.append(e)}}})();